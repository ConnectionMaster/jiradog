[
  {
    "metric_name": "jiradog.countOpenBugs",
    "__comment": "SYS-1473",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "direct",
    "issues": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND resolution=unresolved",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentCommittedIssuesToClosedIssuesPerSprint",
    "__comment": "SYS-1479",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get all issues updated the last 90 days, that were in a sprint, and are not completed",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND status IN (Done,Resolved,Closed)",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "Get all issues updated the last 90 days, that were in a sprint",
      "source": "jira",
      "jql": "project={{project}} AND sprint IN (closedSprints()) AND updated>endOfDay(-90d)",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP1",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND priority='1-Critical, stop everything and fix' AND resolved>endOfDay(-90d) AND resolution=fixed",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ],
      "method": "mean_time_between_statuses"
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP2",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND priority='2-High, fix ASAP' AND resolved>endOfDay(-90d) AND resolution=fixed", 
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ],
      "method": "mean_time_between_statuses"
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP3",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND priority='3-Medium, fix before release ships' AND resolved>endOfDay(-90d) AND resolution=fixed",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP4",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND priority='4-Low, fix if you have time' AND resolved>endOfDay(-90d) AND resolution=fixed",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseStoriesToProd",
    "__comment": "SYS-1634",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "List of issues released to GA (Global Acceptance)/Production",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Story AND fixVersion!=EMPTY AND resolved>endOfDay(-90d)",
      "filter": "{% if 'GA' in issue.fields.fixVersions[0].name or 'Beta' in issue.fields.fixVersions[0].name %}true{% endif %}{# Find fix versions with 'GA' or 'Beta' in the name #}",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "__comment": "List of issues released to GA (Global Acceptance)/Production",
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "filter": "{{metric.numerator.filter}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseSupportFiledBugsP1",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get create date for all tickets",
      "source": "jira",
      "jql": "project={{project}} AND priority='1-Critical, stop everything and fix' AND issueType=bug AND (resolution=unresolved OR resolved>=endOfDay(-90d)) AND support!=empty", 
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{% if issue.fields.resolutiondate != None %}{{issue.fields.resolutiondate}}{% else %}{{issue.fields.updated}}{% endif %}{# If there is no resolution date, use the updated date #}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseSupportFiledBugsP2",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get create date for all tickets",
      "source": "jira",
      "jql": "project={{project}} AND priority='2-High, fix ASAP' AND issueType=bug AND (resolution=unresolved OR resolved>=endOfDay(-90d)) AND support!=empty", 
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{% if issue.fields.resolutiondate != None %}{{issue.fields.resolutiondate}}{% else %}{{issue.fields.updated}}{% endif %}{# If there is no resolution date, use the updated date #}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentReopenedBugsToAllBugs",
    "__comment": "SYS-1633",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND status WAS Reopened DURING (endOfDay(-90d), endOfDay())",
      "method": "ticket_count"
      },
    "denominator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND (created>endOfDay(-90d) OR status WAS Reopened DURING (endOfDay(-90d), endOfDay()))",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentIssuesP1P2ToAllIssues",
    "__comment": "SYS-1476",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get total of all priority 1 and 2 bugs",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND support!=empty AND priority IN ('1-Critical, stop everything and fix','2-High, fix ASAP')",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "Get total of all bugs in projects",
      "source": "jira",
      "jql": "project={{project}} AND createdDate>=endOfDay(-90d) AND issuetype=Bug",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentBugStoryPointsToAllStoryPoints",
    "__comment": "SYS-1475",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get total story points of bugs, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      },
    "denominator": {
      "__comment": "Get total story points of bugs and stories, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype IN (Bug,Story) AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      }
  },
  {
    "metric_name": "jiradog.percentStoryStoryPointsToAllStoryPoints",
    "__comment": "SYS-1475",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get total story points of features, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Story AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      },
    "denominator": {
      "__comment": "Get total story points of bugs and stories, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype IN (Bug,Story) AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      }
  },
  {
    "metric_name": "jiradog.percentRegressionBugsToAllBugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find number of bugs labelled regression",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND labels=regression",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "Find total number of bugs in a project",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND created>=startOfDay(-90d)",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedBugsP1",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P1 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='1-Critical, stop everything and fix' AND resolution=unresolved",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedBugsP2",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P2 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='2-High, fix ASAP' AND resolution=unresolved",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedBugsP3",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P3 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='3-Medium, fix before release ships' AND resolution=unresolved",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedBugsP4",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "COTENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P4 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='4-Low, fix if you have time' AND resolution=unresolved",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentNewBugsToFixedBugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "All Bug issue types created in the last 90 days",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND created>=endOfDay(-90d)",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "All Bug issue types resolved in the last 90 days",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND resolved>=endOfDay(-90d)",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentResolvedIssuesPerSprint",
    "__comment": "SYS-1717",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB",
      "CORENOTE"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all issues that were done at the end of the sprint",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND status WAS NOT IN (closed,done,resolved) BEFORE '{{sprint_end_date}}'",
      "method": "ticket_count"
      },
    "denominator": {
      "source": "jira",
      "jql": "project={{project}} AND sprint={{sprint_id}}",
      "method": "ticket_count"
      },
    "grouping": {
      "by": "sprint",
      "count": "-6",
      "boards": {
        "MACOSNOTE": "368",
        "WINNOTE": "185",
        "ION": "398",
        "IOSNOTE": "325",
        "DRDNOTE": "72",
        "CE": "270",
        "ENB": "536",
        "CORENOTE": "420"
        }
      }
  }
]
