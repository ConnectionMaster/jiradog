[
  {
    "metric_name": "jiradog.avgOpenBugsPerDeveloper",
    "__comment": "SYS-1473",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND status NOT IN (Done, Resolved, Closed)",
      "method": "ticket_count"
      },
    "denominator": {
      "source": "constant",
      "data": {
        "__comment": "Total number of developers per project.",
        "MACOSNOTE": "7",
        "WINNOTE": "4",
        "ION": "9",
        "IOSNOTE": "8",
        "DRDNOTE": "7",
        "CE": "6",
        "ENB": "9"  
        }
      }
  },
  {
    "metric_name": "jiradog.commitToCloseRateOver90Days",
    "__comment": "SYS-1479",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get all issues updated the last 90 days, that were in a sprint, and are not completed",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND status IN (Done,Resolved,Closed)",
      "method": "ticket_count",
      "group_by": {
        "key": "sprint",
        "board_ids": {
          "MACOSNOTE": 368
          },
        "last": 6
        }
      },
    "denominator": {
      "__comment": "Get all issues updated the last 90 days, that were in a sprint",
      "source": "jira",
      "jql": "project={{project}} AND sprint IN (closedSprints()) AND updated>endOfDay(-90d)",
      "method": "ticket_count",
      "group_by": "{{metric.numerator.group_by}}"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP1",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND priority='1-Critical, stop everything and fix' AND Resolved>endOfDay(-90d) AND Resolution=Fixed",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ],
      "method": "mean_time_between_statuses"
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP2",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND priority='2-High, fix ASAP' AND Resolved>endOfWeek(-90d) AND Resolution=Fixed", 
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ],
      "method": "mean_time_between_statuses"
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP3",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND priority='3-Medium, fix before release ships' AND Resolved>endOfDay(-90d) AND Resolution=Fixed",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseBugsP4",
    "__comment": "SYS-1478",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND priority='4-Low, fix if you have time' AND Resolved>endOfDay(-90d) AND Resolution=Fixed",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseFeaturesToProd",
    "__comment": "SYS-1634",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "List of issues released to GA (Global Acceptance)/Production",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Story AND fixVersion!=EMPTY AND resolved>endOfDay(-90d)",
      "filter": "{% if 'GA' in issue.fields.fixVersions[0].name or 'Beta' in issue.fields.fixVersions[0].name %}true{% endif %}",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "__comment": "List of issues released to GA (Global Acceptance)/Production",
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "filter": "{{metric.numerator.filter}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanTimeToCloseP1P2Tickets",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get create date for all tickets",
      "source": "jira",
      "jql": "project={{project}} AND priority IN ('1-Critical, stop everything and fix','2-High, fix ASAP') AND resolutionDate>=startOfDay(-90d) AND issueType=Bug AND Support != Empty",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.resolutiondate}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.numberOfBugsReopened",
    "__comment": "SYS-1633",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND updated>endOfDay(-90d) AND status WAS Reopened",
      "method": "ticket_count"
      },
    "denominator": {
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND updated>endOfDay(-90d) AND (status WAS Reopened OR status IN (Done,Resolved,Closed))",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.percentageP1P2Tickets",
    "__comment": "SYS-1476",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get total of all priority 1 and 2 bugs",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND priority IN ('1-Critical, stop everything and fix','2-High, fix ASAP')",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "Get total of all bugs in projects",
      "source": "jira",
      "jql": "project={{project}} AND createdDate>=startOfDay(-90d) AND issuetype=Bug AND support!=Empty",
      "method": "ticket_count"
      }
  },
  {
    "metric_name":"jiradog.percentageStoryPointsInBugs",
    "__comment": "SYS-1475",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get total story points of bugs, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      },
    "denominator": {
      "__comment": "Get total story points of bugs and stories, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype IN (Bug,Story) AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      }
  },
  {
    "metric_name":"jiradog.percentageStoryPointsInFeatures",
    "__comment": "SYS-1475",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Get total story points of features, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Story AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      },
    "denominator": {
      "__comment": "Get total story points of bugs and stories, rolling 90 day window",
      "source": "jira",
      "jql": "project={{project}} AND issuetype IN (Bug,Story) AND resolved>=endOfDay(-90d)",
      "method": "custom_field_sum",
      "field": "customfield_10203"
      }
  },
  {
    "metric_name": "jiradog.percentageRegressionBugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find number of bugs labelled regression",
      "source": "jira",
      "jql": "{{metric.denominator.jql}} AND labels=regression",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "Find total number of bugs in a project",
      "source": "jira",
      "jql": "project={{project}} AND issuetype=Bug AND created>=startOfDay(-90d)",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedP1Bugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P1 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='1-Critical, stop everything and fix' AND status NOT IN (Done,Resolved,Closed)",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedP2Bugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P2 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='2-High, fix ASAP' AND status NOT IN (Done,Resolved,Closed)",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedP3Bugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P3 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='3-Medium, fix before release ships' AND status NOT IN (Done,Resolved,Closed)",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.meanAgeUnresolvedP4Bugs",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "Find all open P4 bugs and get current age",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND Priority='4-Low, fix if you have time' AND status NOT IN (Done,Resolved,Closed)",
      "method": "mean_time_between_statuses",
      "statuses": [
        "{{issue.fields.created}}",
        "{{issue.fields.updated}}"
        ]
      },
    "denominator": {
      "source": "jira",
      "jql": "{{metric.numerator.jql}}",
      "method": "ticket_count"
      }
  },
  {
    "metric_name": "jiradog.bugsIntroducedVSBugsFixed",
    "projects": [
      "MACOSNOTE",
      "WINNOTE",
      "ION",
      "IOSNOTE",
      "DRDNOTE",
      "CE",
      "ENB"
      ],
    "method": "average",
    "numerator": {
      "__comment": "All Bug issue types created in the last 90 days",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND created>=endOfDay(-90d)",
      "method": "ticket_count"
      },
    "denominator": {
      "__comment": "All Bug issue types resolved in the last 90 days",
      "source": "jira",
      "jql": "project={{project}} AND issueType=Bug AND resolved>=endOfDay(-90d)",
      "method": "ticket_count"
      }
  }
]
